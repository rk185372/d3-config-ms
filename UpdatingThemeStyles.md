# Updating Theme Styles
This document describes the steps that need to be taken when modifying theme styles. 

## Adding a New Style
If you are adding a new style to an existing component or adding styles for new component. 
- Add the style to `d3-next-ios/theming/themes-template.json` as shown below.
    ```Javascript
        "backgroundCta": {
            "background": "palette.callToAction.main"
        },
        "backgroundDefault": {
            "background": "palette.default.main"
        },
        "backgroundOnLogin": {
            "background": "palette.common.white"
        },
        "newStyleBeingAdded": {
            "newBackground": "palette.common.white"
        }
    ```
- While in development, add the style to `d3-next-ios/D3 Banking/Themes.json` as follows:
    ```Javascript
        "pageControlOnFeatureTour": {
            "defaultColor": "#d3d3d3",
            "selectedColor": "#007fad"
        },
        "backgroundSecondary": {
            "background": "#018291"
        },
        "newStyleBeingAdded": {
            "newBackground": "#FFFFFF"
        }
    ```
    Note:

        > The `D3 Banking/Themes.json` file is generated by 
        > Jarvis and will be correct after the theme has been
        > updated on the target environment. 
    
- Run the app and see that your changes are reflected.
- Be sure to run tests locally on your machine (hold down the `Run` button in Xcode then select `Test`) to see if you need to update the themes for your unit tests (A Unit Test can't use Jarvis themes so instead we use `BankingUITests/CommonData/theme.json`)

Once you are finished with development mode and have completed your Pull Request, you are ready to update
the database with the theme styles you have added/modified. To do this:
- Go the theme conduit generator in [Jarvis](https://jarvis.d3vcloud.com/mobile_theme_conduit)
- Fill in the `iOS ref` with the branch name whose `d3-next-ios/theming/themes-template.json` should be used to generate the conduit. (If it's on master branch use `master`. If it's on a branch called feature/AwesomeExample use `feature/AwesomeExample`)
- Fill in the `Android ref` with the branch name whose `d3-next-android/theme-template.json` should be used to generate the conduit.
- Press the `Generate Theme Conduit` button (the conduit will automatically download to your machine as an xml file).
- Run the conduit against the development environment and any other environments that will need the change. (For example if you're using FileZilla, this would mean taking the xml you downloaded when you pressed `Generate Theme Conduit` from the previous step, and dragging it into the path `/logs/dropzone/conduit/`. To make sure that it processes the file transfer refresh by right-clicking and selecting refresh, and/or check the `error` and `processed` folders in the conduit folder.)
- In [Jarvis](https://jarvis.d3vcloud.com), create a new build from the active developer template (there are over 60 but for iOS pick the template with id 2 - `https://jarvis.d3vcloud.com/active_templates/2`, then press the Template link, then in the upper right press `Create Build`). We do this because the Jarvis builds are cached and creating a new build will update the cache. On the Create Build Screen you'll see:
    - Mobile commit = <# head of your feature branch>
    - Built from = <# your feature branch name>
    - Task = <# Unless you are actually building for TestFlight, select None>
- Restart your bitrise (CI Build)
- When the build passes, merge your change. 

